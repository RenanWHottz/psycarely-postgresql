{% load static %}

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Calendário de Consultas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-4">
    <h2 class="mb-4">Calendário de Consultas</h2>

    <div id="calendar" class="mb-4"></div>

    <a href="{% url 'dashboard_profissional' %}" class="btn btn-secondary">Voltar</a>
</div>

<!-- Scripts no final do body -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Certifica que FullCalendar já está definido
    if (typeof FullCalendar === 'undefined') {
        console.error('FullCalendar não carregou corretamente!');
        return;
    }

    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        locale: 'pt-br',
        events: {
            url: "{% url 'calendar_events' %}",
            method: 'GET',
        },
        headerToolbar: {
            left: 'prev,next today',
            center: 'title',
            right: 'dayGridMonth,timeGridWeek,timeGridDay'
        },
        eventTimeFormat: { hour: '2-digit', minute: '2-digit', hour12: false },
        eventClick: function(info) {
            window.location.href = "/consultas/editar/" + info.event.id + "/";
        }
    });
    calendar.render();
});
</script>

</body>
</html>
